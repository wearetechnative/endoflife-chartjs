<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ubuntu Release Lifecycle Chart</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #333;
        }
        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Ubuntu Release Lifecycle Chart</h1>
        <div class="chart-container">
            <canvas id="horizontalBarChart"></canvas>
        </div>
    </div>

    <script>
        // Data for the Ubuntu lifecycle chart
        const currentDate = new Date();
        
        // Function to create date objects
        function createDate(year, month, day) {
            return new Date(year, month - 1, day);
        }
        
        // Ubuntu release data with release dates and end of support dates
        const ubuntuReleases = [
            { version: '22.04 LTS (Jammy Jellyfish)', release: createDate(2022, 4, 21), endOfSupport: createDate(2027, 4, 21), lts: true },
            { version: '20.04 LTS (Focal Fossa)', release: createDate(2020, 4, 23), endOfSupport: createDate(2025, 4, 23), lts: true },
            { version: '23.10 (Mantic Minotaur)', release: createDate(2023, 10, 12), endOfSupport: createDate(2024, 7, 12), lts: false },
            { version: '23.04 (Lunar Lobster)', release: createDate(2023, 4, 20), endOfSupport: createDate(2024, 1, 20), lts: false },
            { version: '18.04 LTS (Bionic Beaver)', release: createDate(2018, 4, 26), endOfSupport: createDate(2023, 4, 26), lts: true },
            { version: '24.04 LTS (Noble Numbat)', release: createDate(2024, 4, 25), endOfSupport: createDate(2029, 4, 25), lts: true }
        ];
        
        // Sort releases by release date (newest first)
        ubuntuReleases.sort((a, b) => b.release - a.release);
        
        // Format date as YYYY-MM-DD
        function formatDate(date) {
            return date.toISOString().split('T')[0];
        }
        
        // Calculate support duration in days
        function calculateSupportDuration(release, endOfSupport) {
            return (endOfSupport - release) / (1000 * 60 * 60 * 24);
        }
        
        // Prepare data for Chart.js
        const labels = ubuntuReleases.map(release => release.version);
        const releaseData = ubuntuReleases.map(release => {
            return {
                x: formatDate(release.release),
                y: formatDate(release.endOfSupport)
            };
        });
        
        // Calculate the min and max dates for the chart
        const minDate = new Date(Math.min(...ubuntuReleases.map(r => r.release)));
        minDate.setFullYear(minDate.getFullYear() - 1); // Add some padding
        
        const maxDate = new Date(Math.max(...ubuntuReleases.map(r => r.endOfSupport)));
        maxDate.setFullYear(maxDate.getFullYear() + 1); // Add some padding
        
        // Data for the chart
        const data = {
            labels: labels,
            datasets: [{
                label: 'Standard Support',
                data: ubuntuReleases.map(release => ({
                    x: [formatDate(release.release), formatDate(release.endOfSupport)]
                })),
                backgroundColor: ubuntuReleases.map(release => 
                    release.lts ? 'rgba(233, 84, 32, 0.7)' : 'rgba(119, 41, 83, 0.7)'
                ),
                borderColor: ubuntuReleases.map(release => 
                    release.lts ? 'rgba(233, 84, 32, 1)' : 'rgba(119, 41, 83, 1)'
                ),
                borderWidth: 1
            }]
        };

        // Chart configuration
        const config = {
            type: 'bar',
            data: data,
            options: {
                indexAxis: 'y',  // This makes the bar chart horizontal
                scales: {
                    x: {
                        type: 'time',
                        time: {
                            unit: 'year',
                            displayFormats: {
                                year: 'yyyy'
                            }
                        },
                        min: formatDate(minDate),
                        max: formatDate(maxDate),
                        title: {
                            display: true,
                            text: 'Support Timeline'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Ubuntu Version'
                        }
                    }
                },
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            generateLabels: function(chart) {
                                return [{
                                    text: 'LTS Release',
                                    fillStyle: 'rgba(233, 84, 32, 0.7)',
                                    strokeStyle: 'rgba(233, 84, 32, 1)',
                                    lineWidth: 1
                                }, {
                                    text: 'Regular Release',
                                    fillStyle: 'rgba(119, 41, 83, 0.7)',
                                    strokeStyle: 'rgba(119, 41, 83, 1)',
                                    lineWidth: 1
                                }];
                            }
                        }
                    },
                    title: {
                        display: true,
                        text: 'Ubuntu Release Lifecycle'
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const release = ubuntuReleases[context.dataIndex];
                                const duration = calculateSupportDuration(release.release, release.endOfSupport);
                                const years = Math.floor(duration / 365);
                                const months = Math.floor((duration % 365) / 30);
                                
                                return [
                                    `Release: ${formatDate(release.release)}`,
                                    `End of Support: ${formatDate(release.endOfSupport)}`,
                                    `Support Duration: ${years} years, ${months} months`,
                                    release.lts ? 'Type: Long Term Support (LTS)' : 'Type: Regular Release'
                                ];
                            }
                        }
                    }
                }
            }
        };

        // Create the chart
        window.onload = function() {
            const ctx = document.getElementById('horizontalBarChart').getContext('2d');
            // Add time adapter for Chart.js
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns';
            script.onload = function() {
                new Chart(ctx, config);
            };
            document.head.appendChild(script);
        };
    </script>
</body>
</html>
